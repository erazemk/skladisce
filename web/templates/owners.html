{{define "content"}}
<div class="flex-between mb-2">
    <h1>Lastniki</h1>
    {{if roleAtLeast .User.Role "manager"}}
    <button class="btn btn-primary" onclick="document.getElementById('add-form').style.display='block'">Dodaj lastnika</button>
    {{end}}
</div>

{{if roleAtLeast .User.Role "manager"}}
<div id="add-form" class="card" style="display:none">
    <h2>Nov lastnik</h2>
    <form method="POST" action="/owners">
        <div class="grid-2">
            <div class="form-group">
                <label for="name">Ime</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="type">Tip</label>
                <select id="type" name="type" required>
                    <option value="person">Oseba</option>
                    <option value="location">Lokacija</option>
                </select>
            </div>
        </div>
        <div class="flex gap-1">
            <button type="submit" class="btn btn-primary">Shrani</button>
            <button type="button" class="btn btn-secondary" onclick="document.getElementById('add-form').style.display='none'">Prekliƒçi</button>
        </div>
    </form>
</div>
{{end}}

<div class="card">
    <table>
        <thead>
            <tr><th>Ime</th><th>Tip</th><th>Ustvarjeno</th>{{if roleAtLeast .User.Role "manager"}}<th></th>{{end}}</tr>
        </thead>
        <tbody>
            {{range .Owners}}
            <tr>
                <td><a href="/owners/{{.ID}}">{{.Name}}</a></td>
                <td><span class="badge badge-{{.Type}}">{{if eq .Type "person"}}Oseba{{else}}Lokacija{{end}}</span></td>
                <td>{{.CreatedAt.Format "02.01.2006"}}</td>
                {{if roleAtLeast $.User.Role "manager"}}
                <td>
                    <a href="/owners/{{.ID}}" class="btn btn-secondary btn-sm">Podrobnosti</a>
                </td>
                {{end}}
            </tr>
            {{else}}
            <tr><td colspan="4" style="color: var(--text-muted)">Ni lastnikov.</td></tr>
            {{end}}
        </tbody>
    </table>
</div>
{{end}}
